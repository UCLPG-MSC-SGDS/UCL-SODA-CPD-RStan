<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Introduction to Probability Distributions and Stan Programming | Introduction to Bayesian Inference and Modelling (June 2025)</title>
  <meta name="description" content="Introduction to Bayesian Inference and Modelling" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Introduction to Probability Distributions and Stan Programming | Introduction to Bayesian Inference and Modelling (June 2025)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Introduction to Bayesian Inference and Modelling" />
  <meta name="github-repo" content="UCLPG-MSC-SGDS/UCL-SODA-CPD-RStan" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Introduction to Probability Distributions and Stan Programming | Introduction to Bayesian Inference and Modelling (June 2025)" />
  
  <meta name="twitter:description" content="Introduction to Bayesian Inference and Modelling" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="installation-of-r-rstudio-stan.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo">
<a href="https://www.ucl.ac.uk/social-data/home/social-data-institute"><img src="images/general/SODA_logo_only.jpg">
</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#timetable-schedule-location"><i class="fa fa-check"></i>Timetable, Schedule &amp; Location</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#my-contact-details"><i class="fa fa-check"></i>My Contact Details</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html"><i class="fa fa-check"></i>Reading List</a>
<ul>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html#day-1-introduction-to-probability-distributions"><i class="fa fa-check"></i>Day 1: Introduction to Probability Distributions</a></li>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html#day-2-introduction-to-bayesian-inference"><i class="fa fa-check"></i>Day 2: Introduction to Bayesian Inference</a></li>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html#day-3-bayesian-generalised-linear-models-glms"><i class="fa fa-check"></i>Day 3: Bayesian Generalised Linear Models (GLMs)</a></li>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html#day-4-bayesian-hierarchical-regression-models"><i class="fa fa-check"></i>Day 4: Bayesian Hierarchical Regression Models</a></li>
<li class="chapter" data-level="" data-path="reading-list.html"><a href="reading-list.html#day-5-bayesian-spatial-modelling-for-areal-data-in-stan"><i class="fa fa-check"></i>Day 5: Bayesian Spatial Modelling for Areal Data in Stan</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html"><i class="fa fa-check"></i><b>1</b> Installation of R, RStudio &amp; Stan</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html#what-is-stan"><i class="fa fa-check"></i><b>1.1</b> What is Stan?</a></li>
<li class="chapter" data-level="1.2" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html#installation-of-r-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installation of R &amp; RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html#installation-process-for-mac-users"><i class="fa fa-check"></i><b>1.2.1</b> Installation process for MAC users</a></li>
<li class="chapter" data-level="1.2.2" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html#installation-process-for-windows-users"><i class="fa fa-check"></i><b>1.2.2</b> Installation process for Windows users</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="installation-of-r-rstudio-stan.html"><a href="installation-of-r-rstudio-stan.html#installation-of-rstan-or-stan-other-important-r-packages"><i class="fa fa-check"></i><b>1.3</b> Installation of <code>rstan</code> (or Stan) &amp; other important r-packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html"><i class="fa fa-check"></i><b>2</b> Introduction to Probability Distributions and Stan Programming</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#lecture-video-tbc"><i class="fa fa-check"></i><b>2.1.1</b> Lecture video (TBC)</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#learning-outcomes"><i class="fa fa-check"></i><b>2.1.2</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#demonstration-video-tbc"><i class="fa fa-check"></i><b>2.1.3</b> Demonstration video (TBC)</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#setting-up-the-work-directory"><i class="fa fa-check"></i><b>2.1.4</b> Setting up the work directory</a></li>
<li class="chapter" data-level="2.1.5" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#loading-packages"><i class="fa fa-check"></i><b>2.1.5</b> Loading packages</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#basic-building-blocks-i-about-stan-programming"><i class="fa fa-check"></i><b>2.2</b> Basic building blocks I: About Stan Programming</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-to-probability-distributions-and-stan-programming.html"><a href="introduction-to-probability-distributions-and-stan-programming.html#opening-a-stan-script-in-rstudio"><i class="fa fa-check"></i><b>2.2.1</b> Opening a Stan Script in RStudio</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Bayesian Inference and Modelling (June 2025)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-probability-distributions-and-stan-programming" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Introduction to Probability Distributions and Stan Programming<a href="introduction-to-probability-distributions-and-stan-programming.html#introduction-to-probability-distributions-and-stan-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Introduction<a href="introduction-to-probability-distributions-and-stan-programming.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lecture-video-tbc" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Lecture video (TBC)<a href="introduction-to-probability-distributions-and-stan-programming.html#lecture-video-tbc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>[Embed recorded lecture video here]</p>
<p><a href="">[<strong>Watch on YouTube</strong>]</a></p>
</div>
<div id="learning-outcomes" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Learning outcomes<a href="introduction-to-probability-distributions-and-stan-programming.html#learning-outcomes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Today’s session aims to introduce you to the basic Stan programming etiquette for Bayesian analysis in RStudio using Stan as an Interface, and producing output and interpreting it’s results. By the end of this session, you should be able to perform the following:</p>
<ol style="list-style-type: decimal">
<li>Develop basic Stan code</li>
<li>Know how to write and compile a Stan Program to compute the various <strong>probability distributions</strong> for simple parameters (i.e., mean, standard deviation, a proportion etc.,)</li>
<li>Know how to compile the results into RStudio for use and interpretation</li>
</ol>
<p>You can follow the live walkthrough demonstration delivered in the first 1-hour of the practical, and then use the computer practical session to try the tutorials yourself by following the instructions as well as trying out the tasks.</p>
</div>
<div id="demonstration-video-tbc" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Demonstration video (TBC)<a href="introduction-to-probability-distributions-and-stan-programming.html#demonstration-video-tbc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>[Embed recorded lecture video here]</p>
<p><a href="">[<strong>Watch on YouTube</strong>]</a></p>
</div>
<div id="setting-up-the-work-directory" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Setting up the work directory<a href="introduction-to-probability-distributions-and-stan-programming.html#setting-up-the-work-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since, this is our first practical lesson for <strong>Day 1</strong>, let us create a new folder <strong>CPD-course</strong> at the desktop location of our computer. Now, create a sub folder called “<strong>Day 1</strong>” within the <strong>CPD-course</strong> folder. Here, we will store all our R and Stan scripts. Set the work directory to the <strong>Day 1</strong> folder.</p>
<p>For Windows, the code for setting the work directory will be:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb4-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/AccountName/Desktop/CPD-course/Day 1&quot;</span>)</span></code></pre></div>
<p>For MAC, the code for setting the work directory will be:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb5-1" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/Users/AccountName/Desktop/CPD-course/Day 1&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-packages" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Loading packages<a href="introduction-to-probability-distributions-and-stan-programming.html#loading-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To start writing scripts for Bayesian analysis, we will need to load the <code>rstan</code> package.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb6-1" tabindex="-1"></a><span class="co"># Load the packages with library()</span></span>
<span id="cb6-2"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb6-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;rstan&#39;</span>)</span>
<span id="cb6-3"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb6-3" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;tidybayes&#39;</span>)</span>
<span id="cb6-4"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb6-4" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;tidyverse&#39;</span>)</span></code></pre></div>
<p>Note that when you load <code>rstan</code> from cran, you will see some recommendations on using multiple cores for speeding the process. For the best experience, we highly recommend using this code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb7-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">mc.cores =</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>())</span>
<span id="cb7-2"><a href="introduction-to-probability-distributions-and-stan-programming.html#cb7-2" tabindex="-1"></a><span class="fu">rstan_options</span>(<span class="at">auto_write =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This tells RStudio to use multiple core for parallel processing whenever Stan is being implemented. Every time you want to use Stan - make sure to load <code>parallel::detectCores()</code> and <code>rstan_options</code> code.</p>
</div>
</div>
<div id="basic-building-blocks-i-about-stan-programming" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Basic building blocks I: About Stan Programming<a href="introduction-to-probability-distributions-and-stan-programming.html#basic-building-blocks-i-about-stan-programming" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section describes how to code up a basic Stan model. This section forms the foundation for later, and more complex models.</p>
<div id="opening-a-stan-script-in-rstudio" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Opening a Stan Script in RStudio<a href="introduction-to-probability-distributions-and-stan-programming.html#opening-a-stan-script-in-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alright, let’s open a <strong>Stan</strong> file. You can do this by clicking and selecting <code>File</code> &gt; <code>New File</code> &gt; <code>Stan File</code></p>
<p><img src="images/general/Open_stan_file.png" width="100%" style="display: block; margin: auto;" /></p>
<p>When you open a new <strong>Stan</strong> file, you will be greeted with an <code>untitled script</code> which contains the following bits of code:</p>
<pre class="text"><code>//
// This Stan program defines a simple model, with a
// vector of values &#39;y&#39; modeled as normally distributed
// with mean &#39;mu&#39; and standard deviation &#39;sigma&#39;.
//
// Learn more about model development with Stan at:
//
//    http://mc-stan.org/users/interfaces/rstan.html
//    https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started
//

// The input data is a vector &#39;y&#39; of length &#39;N&#39;.
data {
  int&lt;lower=0&gt; N;
  vector[N] y;
}

// The parameters accepted by the model. Our model
// accepts two parameters &#39;mu&#39; and &#39;sigma&#39;.
parameters {
  real mu;
  real&lt;lower=0&gt; sigma;
}

// The model to be estimated. We model the output
// &#39;y&#39; to be normally distributed with mean &#39;mu&#39;
// and standard deviation &#39;sigma&#39;.
model {
  y ~ normal(mu, sigma);
}</code></pre>
<p>Do not worry about that - it is just some formalities put there by default by the developers behind <code>rstan</code>. You can delete everything you see in this script as we will build our own basic script from scratch.</p>
<p>Once you have deleted the default information save the empty file in the <strong>Day 1</strong> folder naming it <code>Predicting a proportion.stan</code>. Whenever you are saving Stan programme in RStudio always make sure to save it with a <code>.stan</code> ending.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="installation-of-r-rstudio-stan.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/UCLPG-MSC-SGDS/UCL-SODA-CPD-RStan/edit/main/intro_to_RStan_Probability_Dist.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

</body>

</html>
